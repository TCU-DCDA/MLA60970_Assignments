name: GitHub Classroom Workflow

on: 
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

permissions:
  checks: write
  actions: read
  contents: read

jobs:
  build:
    name: Basic Project Validation
    runs-on: ubuntu-latest
    
    steps:
    - uses: actions/checkout@v4
    
    - name: Validate Repository Structure
      run: |
        echo "ğŸ” Checking repository structure..."
        
        # Check for required directories
        if [ -d "Project" ]; then
          echo "âœ… Project directory found"
        else
          echo "âŒ Project directory missing"
          exit 1
        fi
        
        if [ -d "Preparatory" ]; then
          echo "âœ… Preparatory directory found"
        else
          echo "âŒ Preparatory directory missing"
          exit 1
        fi
        
        # Check for key files
        if [ -f "README.md" ]; then
          echo "âœ… Root README.md found"
        else
          echo "âŒ Root README.md missing"
          exit 1
        fi
        
        echo "ğŸ‰ Repository structure is valid!"
        
    - name: Check for HTML Files (if any)
      run: |
        echo "ğŸ” Checking for HTML files..."
        html_files=$(find . -name "*.html" -not -path "./.git/*" -not -path "./Archive_Original_Scope/*" | wc -l)
        
        if [ $html_files -gt 0 ]; then
          echo "ğŸ“„ Found $html_files HTML file(s)"
          echo "ğŸ”§ Validating HTML syntax..."
          
          for file in $(find . -name "*.html" -not -path "./.git/*" -not -path "./Archive_Original_Scope/*"); do
            echo "Checking $file..."
            # Basic HTML validation - check for opening and closing tags
            if grep -q "<!DOCTYPE html>" "$file" && grep -q "</html>" "$file"; then
              echo "âœ… $file has basic HTML structure"
            else
              echo "âš ï¸ $file may be missing DOCTYPE or closing html tag"
            fi
          done
        else
          echo "ğŸ“ No HTML files found yet - this is expected early in the course"
        fi
        
    - name: Check for CSS Files (if any)
      run: |
        echo "ğŸ” Checking for CSS files..."
        css_files=$(find . -name "*.css" -not -path "./.git/*" -not -path "./Archive_Original_Scope/*" | wc -l)
        
        if [ $css_files -gt 0 ]; then
          echo "ğŸ¨ Found $css_files CSS file(s)"
          echo "âœ… CSS files detected - great progress!"
        else
          echo "ğŸ“ No CSS files found yet - this is expected early in the course"
        fi
        
    - name: Check GitHub Pages Readiness
      run: |
        echo "ğŸ” Checking GitHub Pages readiness..."
        
        # Look for index.html in common locations
        if [ -f "index.html" ]; then
          echo "âœ… Root index.html found - ready for GitHub Pages!"
        elif [ -f "Project/index.html" ]; then
          echo "âœ… Project/index.html found"
        else
          echo "ğŸ“ No index.html found yet - add one when ready to publish"
        fi
        
    - name: Educational Feedback
      run: |
        echo "ğŸ“š COURSE PROGRESS CHECK:"
        echo ""
        echo "This automated check validates your repository structure"
        echo "and provides feedback on your progress through MLA60970."
        echo ""
        echo "Remember:"
        echo "â€¢ This course emphasizes design thinking and accessibility"
        echo "â€¢ Focus on user experience and scholarly communication goals"
        echo "â€¢ Quality over quantity - thoughtful design matters more than complex code"
        echo "â€¢ Your work serves both academic rigor and public accessibility"
        echo ""
        echo "ğŸ¯ Keep building your academic web presence!"
        echo ""
        echo "For help: Review course materials, ask in discussions, or visit office hours"